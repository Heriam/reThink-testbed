<VirtualHost *:443>
  ServerName  rethink.tlabscloud.com
  ServerAlias msg-node matrix

  Header set Access-Control-Allow-Origin "*"

  SSLEngine On
  SSLCertificateFile /opt/certs/server.crt
  SSLCertificateKeyFile /opt/certs/server.key

  SSLProxyEngine On
  ProxyRequests Off
       <Proxy *>
               Order deny,allow
               Allow from all
       </Proxy>
     ProxyPass /stub/connect ws://dev-msg-node-matrix:8001/stub/connect
     ProxyPassReverse /stub/connect ws://dev-msg-node-matrix:8001/stub/connect

     ProxyPass / http://toolkit:8080/
     ProxyPassReverse / http://toolkit:8080/

</VirtualHost>

# virtual host for redirection to development machine
<VirtualHost *:443>
  ServerName  msg-node.rethink.tlabscloud.com

  Header set Access-Control-Allow-Origin "*"

  SSLEngine On
  SSLCertificateFile /opt/certs/server.crt
  SSLCertificateKeyFile /opt/certs/server.key

  SSLProxyEngine On
  ProxyRequests Off
       <Proxy *>
               Order deny,allow
               Allow from all
       </Proxy>
     ProxyPass /stub/connect ws://10.1.6.11:8001/stub/connect
     ProxyPassReverse /stub/connect ws://10.1.6.11:8001/stub/connect

     ProxyPass / http://10.1.6.11:8080/
     ProxyPassReverse / http://10.1.6.11:8080/

</VirtualHost>
