# virtual host for redirection to development machine
<VirtualHost *:443>
  ServerName  talknow.rethink.tlabscloud.com
  ServerAlias  catalogue.talknow.rethink.tlabscloud.com

  Header set Access-Control-Allow-Origin "*"

  SSLEngine On
  SSLCertificateFile /opt/certs/server.crt
  SSLCertificateKeyFile /opt/certs/server.key

  SSLProxyEngine On
  ProxyRequests Off
       <Proxy *>
               Order deny,allow
               Allow from all
       </Proxy>
     # redirect matrix stub connection to MatrixMN
     ProxyPass /stub/connect ws://10.1.6.11:8001/stub/connect
     ProxyPassReverse /stub/connect ws://10.1.6.11:8001/stub/connect

#     # redirect browser-sync WS requests to toolkit
#     ProxyPass /browser-sync/socket.io ws://10.1.6.11:8080/browser-sync/socket.io
#     ProxyPassReverse /browser-sync/socket.io ws://10.1.6.11:8080/browser-sync/socket.io

     # redirect normal https requests to toolkit
     ProxyPass / http://10.1.6.11:8080/
     ProxyPassReverse / http://10.1.6.11:8080/

</VirtualHost>

<VirtualHost *:443>
  ServerName  rethink.tlabscloud.com

  Header set Access-Control-Allow-Origin "*"

  SSLEngine On
  SSLCertificateFile /opt/certs/server.crt
  SSLCertificateKeyFile /opt/certs/server.key

  SSLProxyEngine On
  ProxyRequests Off
       <Proxy *>
               Order deny,allow
               Allow from all
       </Proxy>

     # redirect matrix stub connection to MatrixMN
     ProxyPass /stub/connect ws://dev-msg-node-matrix:8001/stub/connect
     ProxyPassReverse /stub/connect ws://dev-msg-node-matrix:8001/stub/connect

#     # redirect browser-sync WS requests to toolkit
#     ProxyPass /browser-sync ws://toolkit:8080/browser-sync
#     ProxyPassReverse /browser-sync ws://toolkit:8080/browser-sync

     # redirect normal https requests to toolkit
     ProxyPass / http://toolkit:8080/
     ProxyPassReverse / http://toolkit:8080/

</VirtualHost>

