{
      "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiYWN0aXZhdGUiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJhY3RpdmF0ZSJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImFjdGl2YXRlIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewoKLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CgovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlleHBvcnRzOiB7fSwKLyoqKioqKi8gCQkJaWQ6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsb2FkZWQ6IGZhbHNlCi8qKioqKiovIAkJfTsKCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CgovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubG9hZGVkID0gdHJ1ZTsKCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9CgoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCglleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCgl2YXIgc2xhY2tJbmZvID0gewoJICBjbGllbnRJRDogJzExNTMzNjAzODcyLjcyNDM0OTM0MzU2JywKCSAgY2xpZW50U2VjcmV0OiAnZDQyN2VmM2M5NTdkNjhhMjkyZGM3YzRlMjBiNzgzMzAnLAoJICByZWRpcmVjdFVSSTogbG9jYXRpb24ub3JpZ2luLAoJICBjb2RlRW5kcG9pbnQ6ICdodHRwczovL3NsYWNrLmNvbS9vYXV0aC9hdXRob3JpemU/JywKCSAgdG9rZW5FbmRwb2ludDogJ2h0dHBzOi8vc2xhY2suY29tL2FwaS9vYXV0aC5hY2Nlc3M/JywKCSAgaW5mb0VuZHBvaW50OiAnaHR0cHM6Ly9zbGFjay5jb20vYXBpL3VzZXJzLmluZm8/JywKCSAgc2NvcGU6ICdjbGllbnQnCgl9OwoKCS8vZnVuY3Rpb24gdG8gcGFyc2UgdGhlIHF1ZXJ5IHN0cmluZyBpbiB0aGUgZ2l2ZW4gVVJMIHRvIG9iYXRpbiBjZXJ0YWluIHZhbHVlcwoJZnVuY3Rpb24gdXJsUGFyc2VyKHVybCwgbmFtZSkgewoJICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFtdLywgJ1xcXFsnKS5yZXBsYWNlKC9bXF1dLywgJ1xcXF0nKTsKCSAgdmFyIHJlZ2V4UyA9ICdbXFwjJj9dJyArIG5hbWUgKyAnPShbXiYjXSopJzsKCSAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleFMpOwoJICB2YXIgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTsKCSAgaWYgKHJlc3VsdHMgPT09IG51bGwpIHJldHVybiAnJztlbHNlIHJldHVybiByZXN1bHRzWzFdOwoJfQoKCWZ1bmN0aW9uIHNlbmRIVFRQUmVxdWVzdChtZXRob2QsIHVybCkgewoJICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CgkgIGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHsKCSAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7CgkgIH0gZWxzZSBpZiAodHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9ICd1bmRlZmluZWQnKSB7CgkgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBYRG9tYWluUmVxdWVzdC4KCSAgICAvLyBYRG9tYWluUmVxdWVzdCBvbmx5IGV4aXN0cyBpbiBJRSwgYW5kIGlzIElFJ3Mgd2F5IG9mIG1ha2luZyBDT1JTIHJlcXVlc3RzLgoJICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpOwoJICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTsKCSAgfSBlbHNlIHsKCSAgICAvLyBPdGhlcndpc2UsIENPUlMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4KCSAgICB4aHIgPSBudWxsOwoJICB9CgkgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgaWYgKHhocikgewoJICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CgkgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkgewoJICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKCSAgICAgICAgICAgIHZhciBpbmZvID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTsKCSAgICAgICAgICAgIHJlc29sdmUoaW5mbyk7CgkgICAgICAgICAgfSBlbHNlIGlmICh4aHIuc3RhdHVzID09PSA0MDApIHsKCSAgICAgICAgICAgIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRva2VuJyk7CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9OwoJICAgICAgeGhyLnNlbmQoKTsKCSAgICB9IGVsc2UgewoJICAgICAgcmVqZWN0KCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTsKCSAgICB9CgkgIH0pOwoJfQoKCS8qKgoJKiBGdW5jdGlvbiB0byBleGNoYW5nZSB0aGUgY29kZSByZWNlaXZlZCB0byB0aGUgaWQgVG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgYSByZWZyZXNoIHRva2VuCgkqCgkqLwoJdmFyIGV4Y2hhbmdlQ29kZSA9IGZ1bmN0aW9uIGV4Y2hhbmdlQ29kZShjb2RlKSB7CgoJICB2YXIgcyA9IHNsYWNrSW5mbzsKCSAgdmFyIFVSTCA9IHMudG9rZW5FbmRwb2ludCArICdjbGllbnRfaWQ9JyArIHMuY2xpZW50SUQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIHMuY2xpZW50U2VjcmV0ICsgJyZjb2RlPScgKyBjb2RlICsgJyZyZWRpcmVjdF91cmk9JyArIHMucmVkaXJlY3RVUkk7CgoJICBjb25zb2xlLmxvZygnVVJMJywgVVJMKTsKCgkgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBVUkwpLnRoZW4oZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgIHJlc29sdmUoaW5mbyk7CgkgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CgkgICAgICByZWplY3QoZXJyb3IpOwoJICAgIH0pOwoJICB9KTsKCX07CgoJLyoqCgkqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5CgkqLwoJdmFyIGlkcCA9IHsKCgkgIC8qKgoJICAqIEZ1bmN0aW9uIHRvIHZhbGlkYXRlIGFuIGlkZW50aXR5IEFzc2VydGlvbiByZWNlaXZlZAoJICAqIFRPRE8gYWRkIGRldGFpbHMgb2YgdGhlIGltcGxlbWVudGF0aW9uLCBhbmQgaW1wcm92ZSB0aGUgaW1wbGVtZW50YXRpb24KCSAgKgoJICAqIEBwYXJhbSAge2Fzc2VydGlvbn0gICAgSWRlbnRpdHkgQXNzZXJ0aW9uIHRvIGJlIHZhbGlkYXRlZAoJICAqIEBwYXJhbSAge29yaWdpbn0gICAgICAgT3JpZ2luIHBhcmFtZXRlciB0aGF0IGlkZW50aWZpZXMgdGhlIG9yaWdpbiBvZiB0aGUgUlRDUGVlckNvbm5lY3Rpb24KCSAgKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIGlkZW50aXR5IGFzc2VydGlvbiB2YWxpZGF0aW9uIHJlc3VsdAoJICAqLwoJICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uLCBvcmlnaW4pIHsKCSAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKCSAgICAgIGNvbnNvbGUubG9nKCdhc3NlcnRpb24gLSA+JywgYXNzZXJ0aW9uKTsKCSAgICAgIGNvbnNvbGUubG9nKCdvcmlnaW4gLSA+Jywgb3JpZ2luKTsKCSAgICAgIGNvbnNvbGUubG9nKCdNWVBST1hZIC0gVkFMSURBVElORycpOwoJICAgICAgcmVzb2x2ZSh7IGlkZW50aXR5OiAnaWRlbnRpdHlAaWRwLmNvbScsIGNvbnRlbnRzOiAnY29udGVudCcgfSk7CgkgICAgfSk7CgkgIH0sCgoJICAvKioKCSAgKiBGdW5jdGlvbiB0byBnZW5lcmF0ZSBhbiBpZGVudGl0eSBBc3NlcnRpb24KCSAgKiBUT0RPIGFkZCBkZXRhaWxzIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiwgYW5kIGltcHJvdmUgaW1wbGVtZW50YXRpb24KCSAgKgoJICAqIEBwYXJhbSAge2NvbnRlbnRzfSBUaGUgY29udGVudHMgaW5jbHVkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGlkZW50aXR5IHJlY2VpdmVkCgkgICogQHBhcmFtICB7b3JpZ2lufSBPcmlnaW4gcGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgb3JpZ2luIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbgoJICAqIEBwYXJhbSAge3VzZXJuYW1lSGludH0gb3B0aW9uYWwgdXNlcm5hbWVIaW50IHBhcmFtZXRlcgoJICAqIEByZXR1cm4ge1Byb21pc2V9IHJldHVybnMgYSBwcm9taXNlIHdpdGggYW4gaWRlbnRpdHkgYXNzZXJ0aW9uCgkgICovCgkgIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cywgb3JpZ2luLCBoaW50KSB7CgoJICAgIGNvbnNvbGUubG9nKCdjb250ZW50cy0+JywgY29udGVudHMpOwoJICAgIGNvbnNvbGUubG9nKCdvcmlnaW4tPicsIG9yaWdpbik7CgkgICAgY29uc29sZS5sb2coJ2hpbnQtPicsIGhpbnQpOwoKCSAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKCSAgICAgIC8vdGhlIGhpbnQgZmllbGQgY29udGFpbnMgdGhlIGluZm9ybWF0aW9uIG9idGFpbmVkIGFmdGVyIHRoZSB1c2VyIGF1dGhlbnRpY2F0aW9uCgkgICAgICAvLyBpZiB0aGUgaGludCBjb250ZW50IGlzIG5vdCBwcmVzZW50LCB0aGVuIHJlamVjdHMgdGhlIHZhbHVlIHdpdGggdGhlIFVSTCB0byBvcGVuIHRoZSBwYWdlIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlcgoJICAgICAgdmFyIHMgPSBzbGFja0luZm87CgkgICAgICBpZiAoIWhpbnQpIHsKCSAgICAgICAgLy9sZXQgcmVxdWVzdFVybCA9IGh0dHBzOi8vc2xhY2suY29tL29hdXRoL2F1dGhvcml6ZT9jbGllbnRfaWQ9MTE1MzM2MDM4NzIuNzI0MzQ5MzQzNTYmc2NvcGU9Y2hhdDp3cml0ZTp1c2VyJnJlZGlyZWN0X3VyaT1odHRwczovL3d3dy5nZXRwb3N0bWFuLmNvbS9vYXV0aDIvY2FsbGJhY2s7CgoJICAgICAgICB2YXIgcmVxdWVzdFVybCA9IHMuY29kZUVuZHBvaW50ICsgJ2NsaWVudF9pZD0nICsgcy5jbGllbnRJRCArICcmc2NvcGU9JyArIHMuc2NvcGUgKyAnJnJlZGlyZWN0X3VyaT0nICsgcy5yZWRpcmVjdFVSSTsKCgkgICAgICAgIGNvbnNvbGUubG9nKCdmaXJzdCB1cmwgJywgcmVxdWVzdFVybCwgJ2RvbmUnKTsKCSAgICAgICAgcmVqZWN0KHsgbmFtZTogJ0lkUExvZ2luRXJyb3InLCBsb2dpblVybDogcmVxdWVzdFVybCB9KTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHZhciBjb2RlID0gdXJsUGFyc2VyKGhpbnQsICdjb2RlJyk7CgkgICAgICAgIGNvbnNvbGUubG9nKCdjb2RlJywgY29kZSk7CgkgICAgICAgIGV4Y2hhbmdlQ29kZShjb2RlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewoKCSAgICAgICAgICBjb25zb2xlLmxvZygndmFsdWUgQUZURVIgZXhjaGFuZ2VDb2RlJywgdmFsdWUpOwoKCSAgICAgICAgICB2YXIgaW5mb1VybCA9IHMuaW5mb0VuZHBvaW50ICsgJ3Rva2VuPScgKyB2YWx1ZS5hY2Nlc3NfdG9rZW4gKyAnJnVzZXI9JyArIHZhbHVlLnVzZXJfaWQ7CgoJICAgICAgICAgIHNlbmRIVFRQUmVxdWVzdCgnR0VUJywgaW5mb1VybCkudGhlbihmdW5jdGlvbiAoaW5mbykgewoJICAgICAgICAgICAgY29uc29sZS5sb2coJ2luZm8tPicsIGluZm8pOwoKCSAgICAgICAgICAgIHZhciBwcm9maWxlID0gaW5mby51c2VyLnByb2ZpbGU7CgkgICAgICAgICAgICB2YXIgaW5mb1Rva2VuID0geyBwaWN0dXJlOiBwcm9maWxlLmltYWdlX29yaWdpbmFsLCBlbWFpbDogcHJvZmlsZS5lbWFpbCwgZmFtaWx5X25hbWU6IHByb2ZpbGUubGFzdF9uYW1lLCBnaXZlbl9uYW1lOiBwcm9maWxlLmZpcnN0X25hbWUsIGlkOiBpbmZvLnVzZXIuaWQgfTsKCgkgICAgICAgICAgICB2YXIgYXNzZXJ0aW9uID0gYnRvYShKU09OLnN0cmluZ2lmeSh7IHRva2VuSUQ6IHZhbHVlLmFjY2Vzc190b2tlbiwgZW1haWw6IHByb2ZpbGUuZW1haWwsIGlkOiBpbmZvLnVzZXIuaWQgfSkpOwoKCSAgICAgICAgICAgIHZhciB0b1Jlc29sdmUgPSB7IGFzc2VydGlvbjogYXNzZXJ0aW9uLCBpZHA6IHsgZG9tYWluOiAnc2xhY2suY29tJywgcHJvdG9jb2w6ICdPQXV0aCAyLjAnIH0sIGluZm9Ub2tlbjogaW5mb1Rva2VuLCBpbnRlcndvcmtpbmc6IHsgYWNjZXNzX3Rva2VuOiB2YWx1ZS5hY2Nlc3NfdG9rZW4sIGRvbWFpbjogJ3NsYWNrLmNvbScgfSB9OwoJICAgICAgICAgICAgY29uc29sZS5sb2coJ1JFU09MVklORyBUSElTIE9CSkVDVCcsIHRvUmVzb2x2ZSk7CgkgICAgICAgICAgICByZXNvbHZlKHRvUmVzb2x2ZSk7CgkgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CgkgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3ItPicsIGVycm9yKTsKCSAgICAgICAgICB9KTsKCSAgICAgICAgfSk7CgkgICAgICB9CgkgICAgfSk7CgkgIH0KCX07CgoJLyoqCgkqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5IFByb3RvY29sIFN0dWIKCSovCgoJdmFyIFNsYWNrUHJveHlTdHViID0gZnVuY3Rpb24gKCkgewoKCSAgLyoqCgkgICogQ29uc3RydWN0b3Igb2YgdGhlIElkcFByb3h5IFN0dWIKCSAgKiBUaGUgY29uc3RydWN0b3IgYWRkIGEgbGlzdGVuZXIgaW4gdGhlIG1lc3NhZ2VCdXMgcmVjZWl2ZWQgYW5kIHN0YXJ0IGEgd2ViIHdvcmtlciB3aXRoIHRoZSByZWNlaXZlZCBpZHBQcm94eQoJICAqCgkgICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCgkgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCgkgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCgkgICovCgkgIGZ1bmN0aW9uIFNsYWNrUHJveHlTdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsYWNrUHJveHlTdHViKTsKCgkgICAgdmFyIF90aGlzID0gdGhpczsKCSAgICBfdGhpcy5ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKCSAgICBfdGhpcy5tZXNzYWdlQnVzID0gYnVzOwoJICAgIF90aGlzLmNvbmZpZyA9IGNvbmZpZzsKCgkgICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKCSAgICAgIC8vVE9ETyBhZGQgdGhlIHJlc3BlY3RpdmUgbGlzdGVuZXIKCSAgICAgIGlmIChtc2cudG8gPT09ICdkb21haW4taWRwOi8vc2xhY2suY29tJykgewoJICAgICAgICBfdGhpcy5yZXF1ZXN0VG9JZHAobXNnKTsKCSAgICAgIH0KCSAgICB9KTsKCSAgfQoKCSAgLyoqCgkgICogRnVuY3Rpb24gdGhhdCBzZWUgdGhlIGludGVuZGVkIG1ldGhvZCBpbiB0aGUgbWVzc2FnZSByZWNlaXZlZCBhbmQgY2FsbCB0aGUgcmVzcGVjdGl2ZSBmdW5jdGlvbgoJICAqCgkgICogQHBhcmFtIHttZXNzYWdlfSAgbWVzc2FnZSByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZUJ1cwoJICAqLwoKCgkgIF9jcmVhdGVDbGFzcyhTbGFja1Byb3h5U3R1YiwgW3sKCSAgICBrZXk6ICdyZXF1ZXN0VG9JZHAnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0VG9JZHAobXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoJICAgICAgdmFyIHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsKCgkgICAgICBzd2l0Y2ggKG1zZy5ib2R5Lm1ldGhvZCkgewoJICAgICAgICBjYXNlICdnZW5lcmF0ZUFzc2VydGlvbic6CgkgICAgICAgICAgaWRwLmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKCSAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKCSAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKCSAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTsKCSAgICAgICAgICB9KTsKCSAgICAgICAgICBicmVhazsKCSAgICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgoJICAgICAgICAgIGlkcC52YWxpZGF0ZUFzc2VydGlvbihwYXJhbXMuYXNzZXJ0aW9uLCBwYXJhbXMub3JpZ2luKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewoJICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpOwoJICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewoJICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgZXJyb3IpOwoJICAgICAgICAgIH0pOwoJICAgICAgICAgIGJyZWFrOwoJICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgIGJyZWFrOwoJICAgICAgfQoJICAgIH0KCgkgICAgLyoqCgkgICAgKiBUaGlzIGZ1bmN0aW9uIHJlY2VpdmVzIGEgbWVzc2FnZSBhbmQgYSB2YWx1ZS4gSXQgcmVwbGllcyB0aGUgdmFsdWUgdG8gdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSByZWNlaXZlZAoJICAgICoKCSAgICAqIEBwYXJhbSAge21lc3NhZ2V9ICAgbWVzc2FnZSByZWNlaXZlZAoJICAgICogQHBhcmFtICB7dmFsdWV9ICAgICB2YWx1ZSB0byBpbmNsdWRlIGluIHRoZSBuZXcgbWVzc2FnZSB0byBzZW5kCgkgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdyZXBseU1lc3NhZ2UnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICB2YXIgbWVzc2FnZSA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sIGJvZHk6IHsgY29kZTogMjAwLCB2YWx1ZTogdmFsdWUgfSB9OwoKCSAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7CgkgICAgfQoJICB9XSk7CgoJICByZXR1cm4gU2xhY2tQcm94eVN0dWI7Cgl9KCk7CgoJLyoqCgkgKiBUbyBhY3RpdmF0ZSB0aGlzIHByb3RvY29sIHN0dWIsIHVzaW5nIHRoZSBzYW1lIG1ldGhvZCBmb3IgYWxsIHByb3Rvc3R1Yi4KCSAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTAoJICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCgkgKiBAcGFyYW0gIHtQcm90b1N0dWJEZXNjcmlwdG9yLkNvbmZpZ3VyYXRpb25EYXRhTGlzdH0gY29uZmlndXJhdGlvbiAgICAgIGNvbmZpZ3VyYXRpb24KCSAqIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IHdpdGggbmFtZSBhbmQgaW5zdGFuY2Ugb2YgUHJvdG9TdHViCgkgKi8KCgoJZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewoJICByZXR1cm4gewoJICAgIG5hbWU6ICdTbGFja1Byb3h5U3R1YicsCgkgICAgaW5zdGFuY2U6IG5ldyBTbGFja1Byb3h5U3R1Yih1cmwsIGJ1cywgY29uZmlnKQoJICB9OwoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9Ci8qKioqKiovIF0pCn0pOwo7",
      "sourceCodeClassname": "slack.com",
      "encoding": "base64",
      "signature": ""
}
